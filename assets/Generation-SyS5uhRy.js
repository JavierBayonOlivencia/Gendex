const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Area-BkJPp9MY.js","assets/index-tK-OfqVc.js","assets/index-0lHAIBX4.css","assets/pokeAPIService-B6kPXZnE.js","assets/Forms-Ba7AfQeD.js","assets/Info-DTob824R.js"])))=>i.map(i=>d[i]);
import{j as e,r as c,_ as N,u as I}from"./index-tK-OfqVc.js";import{e as x,P as v}from"./pokeAPIService-B6kPXZnE.js";function y({activeLink:n,setActiveLink:t,isSelected:r,dispatch:o,species:l,setSelectedPokemon:u}){const m=[...l||[]].sort((a,s)=>x(a.url)-x(s.url));function d(a,s){o({type:"SET_SELECTED",payload:!0}),u({selectedPokemonId:s,selectedPokemonName:a}),t(s)}return e.jsx("aside",{className:`section__nav ${!r&&"section__nav--active"}`,children:e.jsx("ul",{className:"section__nav__links",children:m==null?void 0:m.map(({name:a,url:s})=>{const i=x(s),f=n===i;return e.jsx("li",{className:`nav__link ${f?"nav__link--active":""}`,children:e.jsxs("button",{onClick:()=>d(a,i),className:"btn btn--link",children:[e.jsxs("span",{children:["NO.",i.toString().padStart(3,"0")]}),"/",a]})},`${a}-${i}`)})})})}const A=[{linkName:"Info"},{linkName:"Area"},{linkName:"Forms"}];function g({state:n,dispatch:t}){const{activeState:r}=n;return e.jsx("nav",{className:"nav",children:e.jsx("ul",{className:"nav__links",children:A.map(o=>e.jsx("li",{children:e.jsx("button",{className:`btn btn--link ${o.linkName===r&&"btn--link-active"}`,onClick:()=>t({type:`SET_${o.linkName.toUpperCase()}`,payload:!0}),children:o.linkName})},o.linkName))})})}const b={isSelected:!1,isInfo:!0,isArea:!1,isForms:!1,activeState:"Info"};function F(n,t){switch(t.type){case"SET_SELECTED":return{...n,isSelected:t.payload};case"SET_INFO":return{...n,isInfo:t.payload,isArea:!1,isForms:!1,activeState:"Info"};case"SET_AREA":return{...n,isInfo:!1,isArea:t.payload,isForms:!1,activeState:"Area"};case"SET_FORMS":return{...n,isInfo:!1,isArea:!1,isForms:t.payload,activeState:"Forms"};default:return n}}function T(){const[n,t]=c.useReducer(F,b);return{state:n,dispatch:t}}function D({pokemonName:n,pokemonId:t,info:r}){return e.jsx("div",{className:"content__image content__image--hero",children:r?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r.sprites.other["official-artwork"].front_default,alt:`${n} oficial art.`}),e.jsxs("h1",{className:"content__title-small",children:[e.jsxs("span",{children:["NO.",t==null?void 0:t.toString().padStart(3,"0")]}),"/",n]})]}):e.jsx("h1",{className:"content__title-large",children:"Choose A Pokemon!"})})}const L=c.lazy(()=>N(()=>import("./Area-BkJPp9MY.js"),__vite__mapDeps([0,1,2,3]))),C=c.lazy(()=>N(()=>import("./Forms-Ba7AfQeD.js"),__vite__mapDeps([4,1,2,3]))),w=c.lazy(()=>N(()=>import("./Info-DTob824R.js"),__vite__mapDeps([5,1,2,3])));function $({setActiveLink:n,isInfo:t,isArea:r,isForms:o,isSelected:l,selectedPokemon:u,setSelectedPokemon:m,gen:d}){const{selectedPokemonName:a,selectedPokemonId:s}=u,[i,f]=c.useState(),[k,p]=c.useState();return c.useEffect(()=>{let S=!0;const _=new v;return(async()=>{if(a===null||s===null)return;const h=await _.getPokemonInfo(s),E=x(h.species.url),P=await _.getSpeciesInfo(E);S&&(f(h),p(P))})(),()=>{S=!1}},[a,s]),e.jsxs("section",{className:"content content--row",children:[e.jsx(D,{pokemonName:a,pokemonId:s,info:i}),e.jsx("div",{className:`content ${l?"":"none"}`,children:e.jsxs(c.Suspense,{fallback:e.jsx("p",{children:"Loading..."}),children:[e.jsx(w,{isInfo:t,pokemonName:a,pokemonId:s,gen:d,info:i,specie:k}),e.jsx(L,{isArea:r,pokemonName:a,pokemonId:s}),e.jsx(C,{isForms:o,pokemonName:a,pokemonId:s,setSelectedPokemon:m,setActiveLink:n,info:i,specie:k})]})})]})}function G(){const{id:n,name:t}=I(),{state:r,dispatch:o}=T(),{isSelected:l,isInfo:u,isArea:m,isForms:d}=r,[a,s]=c.useState(null),[i,f]=c.useState(null),[k,p]=c.useState({selectedPokemonId:null,selectedPokemonName:null});return c.useEffect(()=>{const S=new v;let _=!0;return(async()=>{const h=await S.getGeneration(n);_&&f(h)})(),()=>{_=!1}},[n]),e.jsxs(e.Fragment,{children:[l?e.jsx(g,{dispatch:o,state:r}):e.jsxs("span",{className:"header__location",children:["Gen ",n,": ",t]}),e.jsxs("main",{className:"container container--grid",children:[e.jsx(y,{activeLink:a,setActiveLink:s,isSelected:l,dispatch:o,species:i==null?void 0:i.pokemon_species,setSelectedPokemon:p}),e.jsx($,{setActiveLink:s,gen:Number(n),isInfo:u,isArea:m,isForms:d,isSelected:l,selectedPokemon:k,setSelectedPokemon:p,activeState:""}),e.jsx("button",{onClick:()=>o({type:"SET_SELECTED",payload:!1}),className:"btn btn--outline btn--fixed",children:"Back to list"})]})]})}export{G as default};
