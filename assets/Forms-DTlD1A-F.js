import{r as g,j as t}from"./index-Dx4KDJw6.js";import{P as N,e as p}from"./pokeAPIService-B6kPXZnE.js";function L({isForms:m,pokemonId:s,pokemonName:d,setSelectedPokemon:r,setActiveLink:l,info:e,specie:i}){const[o,c]=g.useState([]),[a,j]=g.useState([]);return g.useEffect(()=>{const h=new N;let x=!0;return(async()=>{if(e===void 0||i===void 0)return;const k=i.evolutionChainId,P=i.varieties,f=await h.getEvolutionChain(k),I=await Promise.all(f.chain.map(({id:n})=>h.getPokemonInfo(n))),C=f.chain.map((n,u)=>({info:I[u],name:n.name,minLevel:n.minLevel,trigger:n.trigger})),v=P.filter(n=>n.is_default===!1),w=await Promise.all(v.map(n=>h.getPokemonInfo(p(n.pokemon.url)))),E=v.map((n,u)=>({info:w[u],name:n.pokemon.name,minLevel:null,trigger:null}));x&&(c(C),j(E))})(),()=>{x=!1}},[s,d,e,i]),t.jsxs("div",{className:`content content__page ${m&&"content__page--active"}`,children:[(o==null?void 0:o.length)>0&&t.jsx(_,{title:"Evolution Chain",pokemon:o,setSelectedPokemon:r,setActiveLink:l}),(a==null?void 0:a.length)>0&&t.jsx(_,{title:"Variations",pokemon:a,setSelectedPokemon:r,setActiveLink:l}),(o==null?void 0:o.length)<0&&(a==null?void 0:a.length)<0&&t.jsx("h2",{children:"This PokÃ©mon currently doesn't have any other forms or variations."})]})}function _({title:m,pokemon:s,setSelectedPokemon:d,setActiveLink:r}){function l(e,i){d({selectedPokemonId:e,selectedPokemonName:i}),r(e)}return t.jsxs("article",{className:"content__box content__box--column",children:[t.jsx("span",{className:"font-w700",children:m}),t.jsx("div",{className:"content__box flex-wrap",children:s==null?void 0:s.map(e=>{var i,o,c,a;return t.jsxs("div",{onClick:()=>l(e.info.id,e.name),className:"content__image content__image--md",children:[t.jsx("span",{children:e.name}),e.trigger&&t.jsxs("span",{children:[e.trigger,".",e.minLevel]}),t.jsx("img",{loading:"lazy",src:((a=(c=(o=(i=e==null?void 0:e.info)==null?void 0:i.sprites)==null?void 0:o.other)==null?void 0:c["official-artwork"])==null?void 0:a.front_default)??"",alt:e.name})]},`${e.info.id}-${e.name}`)})})]})}export{L as default};
